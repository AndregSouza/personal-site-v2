import { ThemeProvider } from "@/components/theme-provider"
import type { Metadata } from "next";
import { Sidebar, SidebarBody, SidebarLinks } from '@/components/aceternity/sidebar'
import localFont from 'next/font/local'
import Link from "next/link"
import "./globals.css";
import { X } from "lucide-react";
import { ModeToggle } from "@/components/ui/mode-toggle";
import { Button } from "@/components/ui/button";
import Script from "next/script";
import { Analytics } from "@vercel/analytics/react"
import { SpeedInsights } from "@vercel/speed-insights/next"

const Sohne = localFont({
  src: [
    {
      path: './fonts/soehne-buch.woff2',
      weight: '400',
      style: 'normal',

    },
    {
      path: './fonts/soehne-kraftig.woff2',
      weight: '500',
      style: 'normal'
    }
  ],
  variable: '--font-sohne',
})

const Plantijn = localFont({
  src: [{
    path: './fonts/martina-plantijn-italic.woff2',
    weight: '400',
    style: 'italic'
  }],
  variable: '--font-plantijn',
})

export const metadata: Metadata = {
  title: "Andre Souza",
  description: "Generated by create next app",
}

export default function RootLayout({ children, }: Readonly<{ children: React.ReactNode; }>) {

  return (
    <html lang="en" suppressHydrationWarning>

      <Script id="show-fullstory">
        {`window['_fs_host'] = 'fullstory.com';
window['_fs_script'] = 'edge.fullstory.com/s/fs.js';
window['_fs_org'] = '15BFTQ';
window['_fs_namespace'] = 'FS';
!function(m,n,e,t,l,o,g,y){var s,f,a=function(h){
return!(h in m)||(m.console&&m.console.log&&m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].'),!1)}(e)
;function p(b){var h,d=[];function j(){h&&(d.forEach((function(b){var d;try{d=b[h[0]]&&b[h[0]](h[1])}catch(h){return void(b[3]&&b[3](h))}
d&&d.then?d.then(b[2],b[3]):b[2]&&b[2](d)})),d.length=0)}function r(b){return function(d){h||(h=[b,d],j())}}return b(r(0),r(1)),{
then:function(b,h){return p((function(r,i){d.push([b,h,r,i]),j()}))}}}a&&(g=m[e]=function(){var b=function(b,d,j,r){function i(i,c){
h(b,d,j,i,c,r)}r=r||2;var c,u=/Async$/;return u.test(b)?(b=b.replace(u,""),"function"==typeof Promise?new Promise(i):p(i)):h(b,d,j,c,c,r)}
;function h(h,d,j,r,i,c){return b._api?b._api(h,d,j,r,i,c):(b.q&&b.q.push([h,d,j,r,i,c]),null)}return b.q=[],b}(),y=function(b){function h(h){
"function"==typeof h[4]&&h[4](new Error(b))}var d=g.q;if(d){for(var j=0;j<d.length;j++)h(d[j]);d.length=0,d.push=h}},function(){
(o=n.createElement(t)).async=!0,o.crossOrigin="anonymous",o.src="https://"+l,o.onerror=function(){y("Error loading "+l)}
;var b=n.getElementsByTagName(t)[0];b&&b.parentNode?b.parentNode.insertBefore(o,b):n.head.appendChild(o)}(),function(){function b(){}
function h(b,h,d){g(b,h,d,1)}function d(b,d,j){h("setProperties",{type:b,properties:d},j)}function j(b,h){d("user",b,h)}function r(b,h,d){j({
uid:b},d),h&&j(h,d)}g.identify=r,g.setUserVars=j,g.identifyAccount=b,g.clearUserCookie=b,g.setVars=d,g.event=function(b,d,j){h("trackEvent",{
name:b,properties:d},j)},g.anonymize=function(){r(!1)},g.shutdown=function(){h("shutdown")},g.restart=function(){h("restart")},
g.log=function(b,d){h("log",{level:b,msg:d})},g.consent=function(b){h("setIdentity",{consent:!arguments.length||b})}}(),s="fetch",
f="XMLHttpRequest",g._w={},g._w[f]=m[f],g._w[s]=m[s],m[s]&&(m[s]=function(){return g._w[s].apply(this,arguments)}),g._v="2.0.0")
}(window,document,window._fs_namespace,"script",window._fs_script);`}
      </Script>

      <body className={`${Sohne.variable} ${Plantijn.variable} ${"flex bg-background md:bg-sidebar flex-col md:flex-row"}`}>
        <SpeedInsights />
        <Analytics />
        <ThemeProvider attribute="class" defaultTheme="system" enableSystem>
          <Sidebar animate={false}>
            <SidebarBody>
              <div className="flex h-14 items-center justify-between">
                <Button variant="outline" size="icon" className="md:hidden">
                  <X className="h-[1.2rem] w-[1.2rem] rotate-0 scale-100" />
                </Button>
                <Link href="/" className="hidden md:visible flex items-center gap-2.5 pr-3 font-medium">
                  <Button size="icon" className="bg-sidebar-active hover:bg-sidebar-hover" >
                    <svg width="20" height="20" viewBox="0 0 92 92" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fillRule="evenodd" clipRule="evenodd" d="M26.509 31.1871C21.1742 20.5301 25.5236 7.58353 36.2235 2.27013C46.9234 -3.04327 59.9222 1.2886 65.257 11.9456L89.7207 60.8156C95.0555 71.4726 90.7062 84.4192 80.0063 89.7326C69.3063 95.046 56.3076 90.7141 50.9728 80.0571L26.509 31.1871ZM60.99 21.0655C60.99 29.2917 54.2945 35.9604 46.0351 35.9604C37.7757 35.9604 31.0801 29.2917 31.0801 21.0655C31.0801 12.8392 37.7757 6.17048 46.0351 6.17048C54.2945 6.17048 60.99 12.8392 60.99 21.0655ZM2.27927 60.8157L15.1891 35.0264L39.1086 83.1406L39.1453 83.1458C33.0386 91.5044 21.5914 94.4987 11.9937 89.7327C1.29379 84.4193 -3.05552 71.4727 2.27927 60.8157Z" fill="#1f1f23" className="dark:fill-white" />
                    </svg>
                  </Button>
                  <div className="flex flex-col">
                    <span className="text-[14px] leading-tight font-medium">Andre Souza</span>
                    <span className="text-[12px] leading-tight text-muted-foreground font-normal">andregsweb@gmail.com</span>
                  </div>
                </Link>
                <ModeToggle />
              </div>
              <section>
                <SidebarLinks />
              </section>
            </SidebarBody>
          </Sidebar>
          <main className="h-full m-0 flex flex-col w-full bg-background m-0 md:m-2 md:h-[calc(100svh_-_1rem)] sm:rounded-lg overflow-auto shadow-md">
            {children}
          </main>
        </ThemeProvider>
      </body>
    </html >
  );
}